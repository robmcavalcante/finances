<%= simple_form_for transaction do |f| %>
  <div data-turbo="false">
    <div class="row">
      <div class="col-md-12">
        <div class="form-group">
          <%= f.label :description, "Descrição" %>
          <%= f.input :description, label: false, input_html: { class: 'form-control' } %>
        </div>    
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :value, "Valor" %>
          <%= f.input :value, label: false, input_html: { class: 'form-control day-month' } %>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :date, "Data" %>
          <%= f.input :date, label: false, input_html: { class: 'form-control' } %>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-4">
        <div class="form-group">
          <%= f.label :card, "Cartão de Crédito" %>
          <%= f.association :card, collection: Card.all, label_method: :description, include_blank: false, label: false, input_html: { class: 'form-control' } %>
        </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
          <%= f.label :invoice_id, "Fatura" %>
          <%= f.association :invoice, collection: Invoice.all, label_method: :month_year, include_blank: false, label: false, input_html: { class: 'form-control' } %>
          <p class="text-primary white-text" id="invoice-input-action"><i class="fas fa-plus"></i> Adicionar</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
          <%= f.label :category, "Categoria" %>
          <%= f.association :category, collection: Category.all, label_method: :name, include_blank: false, label: false, input_html: { class: 'form-control' } %>
        </div>
      </div>
    </div>
    <%= f.submit "Salvar", class: 'btn btn-success' %>
  </div>
<% end %>

<%# # TODO: relocate as javascript assets %>
<script>
  btn_add_invoice_input = document.querySelector("#invoice-input-action");

  btn_add_invoice_input.addEventListener("click", 
    function InsertInvoiveInput(){
      a = document.querySelector("#transaction_invoice_id");
      a.outerHTML =  "";

      target = document.querySelector("#invoice-input-action");

      element = document.createElement("input");
      element.setAttribute("type", "text");
      element.setAttribute("name", "transaction[invoice]");
      element.setAttribute("class", "form-control invoice");

      target.parentNode.insertBefore(element, target);

      target.outerHTML = "";
    });
</script>